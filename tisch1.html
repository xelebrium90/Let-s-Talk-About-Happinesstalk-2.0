<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happiness Talk – Tisch 1</title>
<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: #eaf4ff;
    text-align: center;
    padding: 40px 20px;
    color: #1f2d3d;
}
h1 { margin-bottom: 5px; }
h2 { font-weight: 400; margin-bottom: 40px; }

.line {
    margin-top: 30px;
    font-size: 20px;
    opacity: 0;
    transform: translateY(10px);
    transition: all 2.8s ease;
}
.line.show {
    opacity: 1;
    transform: translateY(0);
}

button {
    margin-top: 40px;
    padding: 12px 24px;
    font-size: 16px;
    border: none;
    background: #1f2d3d;
    color: white;
    cursor: pointer;
    border-radius: 6px;
    opacity: 0.5;
}
button.enabled {
    opacity: 1;
    cursor: pointer;
}

.timer-container {
    margin-top: 20px;
    display: none;
}

.progress-bar {
    width: 100%;
    max-width: 300px;
    height: 8px;
    background: #d0e4f7;
    border-radius: 4px;
    margin: 15px auto;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #4a90e2, #357abd);
    width: 0%;
    transition: width 0.3s ease;
    border-radius: 4px;
}

.countdown {
    font-size: 18px;
    font-weight: 500;
    color: #357abd;
    margin-top: 10px;
}
</style>
</head>
<body>

<h1>Let's Talk About - Happiness</h1>
<h2>Tisch 1 – Glück & Erfüllung</h2>

<div id="content"></div>
<button id="nextBtn" disabled>Impuls laden...</button>

<div class="timer-container" id="timerContainer">
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>
    <div class="countdown" id="countdown"></div>
</div>

<script>
const lines = [
"Opener: Glück ist kein Ziel. Es ist eine Art, durch das Leben zu gehen.",
"Wann hast du dich zuletzt wirklich erfüllt gefühlt?",
"Welche Entscheidung hat dein Leben positiv verändert?",
"Was würdest du tun, wenn Scheitern ausgeschlossen wäre?",
"Mini-Impuls: 60 Sekunden Stille. Denke an einen Moment echter Dankbarkeit."
];

let index = 0;
const delay = 300000; // 5 Minuten in Millisekunden
const openerDelay = 2000; // 2 Sekunden für den Opener
const btn = document.getElementById("nextBtn");
const timerContainer = document.getElementById("timerContainer");
const progressFill = document.getElementById("progressFill");
const countdownDisplay = document.getElementById("countdown");
let timerInterval;

function startTimer() {
    timerContainer.style.display = "block";
    let timeRemaining = delay;
    
    timerInterval = setInterval(() => {
        timeRemaining -= 100;
        
        // Berechne Fortschritt in Prozent
        const progress = ((delay - timeRemaining) / delay) * 100;
        progressFill.style.width = progress + "%";
        
        // Berechne verbleibende Zeit in Minuten und Sekunden
        const minutes = Math.floor(timeRemaining / 60000);
        const seconds = Math.floor((timeRemaining % 60000) / 1000);
        
        countdownDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, "0")} Minuten verbleibend`;
        
        if(timeRemaining <= 0) {
            clearInterval(timerInterval);
            timerContainer.style.display = "none";
        }
    }, 100);
}

function enableButton() {
    btn.disabled = false;
    btn.classList.add("enabled");
    btn.textContent = "Nächsten Impuls anzeigen";
    timerContainer.style.display = "none";
    if(timerInterval) clearInterval(timerInterval);
}

function nextLine() {
    if(index < lines.length) {
        const div = document.createElement("div");
        div.className = "line";
        div.textContent = lines[index];
        document.getElementById("content").appendChild(div);

        setTimeout(() => div.classList.add("show"), 100);
        index++;
        btn.disabled = true;
        btn.classList.remove("enabled");
        btn.textContent = "Bitte warten...";
        
        // Ab dem zweiten Impuls: Timer für 5 Minuten starten
        if(index > 1) {
            startTimer();
            setTimeout(enableButton, delay);
        } else {
            // Nach dem Opener: Timer ausblenden, Button nach 5 Minuten aktiv
            timerContainer.style.display = "none";
            setTimeout(enableButton, delay);
        }
    } else {
        btn.style.display = "none";
        timerContainer.style.display = "none";
    }
}

btn.addEventListener("click", nextLine);

// Opener nach 2 Sekunden automatisch anzeigen
setTimeout(nextLine, openerDelay);
</script>

</body>
</html>
